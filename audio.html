<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio prilagodbe</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Stilizacija i centriranje */
        #audio-recorder {
            display: flex;
            flex-direction: column; /* Svi elementi u stupcu */
            align-items: center;
            margin-top: 20px;
        }

        .buttons-container {
            display: flex;
            flex-direction: row; /* Gumbi u jednom redu */
            justify-content: center; /* Centriranje gumba */
            gap: 15px; /* Razmak između gumba */
            margin-top: 20px; /* Razmak iznad gumba */
        }

        #audio-recorder button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            color: white;
        }

        #record-btn {
            background-color: #4caf50; /* Zeleno za snimanje */
        }

        #stop-btn {
            background-color: #f44336; /* Crveno za zaustavljanje */
        }

        #save-btn {
            background-color: #2196f3; /* Plavo za spremanje */
        }

        #audio-recorder button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #audio-playback {
            margin-top: 10px;
            width: 100%;
            max-width: 400px;
        }

        #status {
            margin-top: 10px;
            font-size: 18px;
            font-weight: bold;
            color: #f57c00; /* Narandžasta za status */
        }

        #duration {
            margin-top: 5px;
            font-size: 16px;
        }

        .example {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            font-size: 16px;
        }

        .bad-example {
            background-color: #ffdddd; /* Svijetlo crvena za loše primjere */
            border: 1px solid #f44336;
        }

        .good-example {
            background-color: #ddffdd; /* Svijetlo zelena za dobre primjere */
            border: 1px solid #4caf50;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="logo.png" alt="Logo">
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Početna</a></li>
                <li><a href="#prilagodba">Općenito o prilagodbama materijala</a></li>
                <li><a href="#tehnologije">Preporučene tehnologije</a></li>
                <li><a href="o-nama.html">O nama</a></li>
                <li><a href="kontakt.html">Kontakt</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <aside class="sidebar">
            <p class="video-lekcije-header"><strong>Videolekcije</strong></p>
            <ul class="video-lekcije-list">
                <li><a href="dizajn-daltonizam.html">Dizajn prilagođen daltonizmu</a></li>
                <li><a href="fontovi-velicina.html">Fontovi i veličina teksta</a></li>
                <li><a href="alt-tekst.html">Alternativni tekst za slike</a></li>
                <li><a href="struktura-dokumenta.html">Struktura dokumenta</a></li>
                <li><a href="naracija.html">Naracija i opis vizualnih elemenata</a></li>
                <li><a href="titlovi.html">Titlovi i transkripti</a></li>
                <li><a href="kontrast.html">Kontrast i vizualni elementi</a></li>
                <li><a href="audio.html">Audio prilagodbe</a></li>
                <li><a href="alati.html">Alati za provjeru pristupačnosti</a></li>
                <li><a href="smjernice.html">Smjernice za predavače</a></li>
                <li><a href="predlosci.html">Predlošci uz predavanja</a></li>
            </ul>
        </aside>
        <main>
            <section>
                <h1>Audio prilagodbe</h1>
                <p>
                    Audio prilagodbe su ključni aspekt pristupačnosti digitalnog sadržaja. Kroz prilagodbe kao što su poboljšanje kvalitete zvuka, transkripti i opcije za snimanje, osiguravamo da svi korisnici mogu koristiti sadržaj, uključujući osobe s oštećenjem sluha ili poteškoćama u razumijevanju zvučnih elemenata.
                </p>

                <h2>Kako koristiti snimač zvuka?</h2>
                <p>
                    Snimač zvuka omogućuje jednostavno snimanje i spremanje zvuka. Slijedite ove korake:
                </p>
                <ol>
                    <li>Kliknite na gumb "Započni snimanje".</li>
                    <li>Govornik treba jasno govoriti kako bi se osigurala dobra kvaliteta snimke.</li>
                    <li>Kliknite na "Zaustavi snimanje" kada završite.</li>
                    <li>Pregledajte snimku koristeći ugrađeni player.</li>
                    <li>Kliknite na "Spremi snimku" kako biste preuzeli datoteku na svoj uređaj.</li>
                </ol>

                <h2>Primjeri dobre i loše prakse</h2>
                <div class="example bad-example">
                    <strong>Loš primjer:</strong> Snimanje u prostoriji s pozadinskom bukom i nejasnim govorom.
                    <ul>
                        <li>Snimka ima visoku razinu šuma.</li>
                        <li>Glas govornika nije razumljiv.</li>
                    </ul>
                </div>
                <div class="example good-example">
                    <strong>Dobar primjer:</strong> Snimanje u tihom okruženju s jasnim govorom i dobrim tonom.
                    <ul>
                        <li>Snimka je čista i razumljiva.</li>
                        <li>Svi važni elementi su jasno istaknuti.</li>
                    </ul>
                </div>

                <h2>Snimač i pročišćivač zvuka</h2>
                <div id="audio-recorder">
                    <audio id="audio-playback" controls></audio>
                    <div class="buttons-container">
                        <button id="record-btn">Započni snimanje</button>
                        <button id="stop-btn" disabled>Zaustavi snimanje</button>
                        <button id="save-btn" disabled>Spremi snimku</button>
                    </div>
                    <div id="status"></div>
                    <div id="duration"></div>
                </div>

                <p>
                    Ovaj alat omogućava korisnicima snimanje i pregled snimki u nekoliko jednostavnih koraka. Provjerite da ste u tihom okruženju i koristite mikrofon visoke kvalitete za najbolje rezultate.
                </p>
            </section>
        </main>
    </div>

    <footer>
        <p>&copy; 2024 AllSeeing. Sva prava pridržana.</p>
    </footer>

    <script>
        const recordBtn = document.getElementById('record-btn');
        const stopBtn = document.getElementById('stop-btn');
        const saveBtn = document.getElementById('save-btn');
        const audioPlayback = document.getElementById('audio-playback');
        const status = document.getElementById('status');
        const durationDisplay = document.getElementById('duration');

        let audioContext, mediaRecorder, recordedChunks = [], stream, startTime, timer;

        recordBtn.addEventListener('click', async () => {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                audioContext = new (window.AudioContext || window.webkitAudioContext)();

                const source = audioContext.createMediaStreamSource(stream);
                const destination = audioContext.createMediaStreamDestination();

                source.connect(destination);
                mediaRecorder = new MediaRecorder(destination.stream);
                recordedChunks = [];

                mediaRecorder.ondataavailable = (e) => {
                    if (e.data.size > 0) {
                        recordedChunks.push(e.data);
                    }
                };

                mediaRecorder.onstop = () => {
                    const audioBlob = new Blob(recordedChunks, { type: 'audio/webm' });
                    const audioURL = URL.createObjectURL(audioBlob);
                    audioPlayback.src = audioURL;

                    saveBtn.disabled = false;
                    clearInterval(timer);

                    stream.getTracks().forEach(track => track.stop());
                };

                startTime = Date.now();
                timer = setInterval(() => {
                    const elapsedTime = ((Date.now() - startTime) / 1000).toFixed(1);
                    durationDisplay.textContent = `Duljina snimke: ${elapsedTime} sekundi`;
                }, 100);

                status.textContent = 'Snimanje je u tijeku...';
                status.style.color = 'green';

                mediaRecorder.start();
                recordBtn.disabled = true;
                stopBtn.disabled = false;
                saveBtn.disabled = true;

            } catch (err) {
                console.error('Pogreška prilikom pristupa mikrofonu:', err);
                alert('Nije moguće pokrenuti snimanje. Provjerite dozvole za mikrofon.');
            }
        });

        stopBtn.addEventListener('click', () => {
            if (mediaRecorder && mediaRecorder.state === "recording") {
                mediaRecorder.stop();
            }
            recordBtn.disabled = false;
            stopBtn.disabled = true;

            if (audioContext) {
                audioContext.close();
            }

            status.textContent = 'Snimanje je zaustavljeno.';
            status.style.color = '#f57c00';
        });

        saveBtn.addEventListener('click', () => {
            const audioBlob = new Blob(recordedChunks, { type: 'audio/webm' });
            const url = URL.createObjectURL(audioBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'snimka.webm';
            a.click();
        });
    </script>
</body>
</html>
